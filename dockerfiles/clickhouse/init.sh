#!/bin/bash
clickhouse-client --host=127.0.0.1 --port=${CLICKHOUSE_PORT} --user=${CLICKHOUSE_USER} --password=${CLICKHOUSE_PASS} --query="CREATE DATABASE ${CLICKHOUSE_DB};"
clickhouse-client --host=127.0.0.1 --port=${CLICKHOUSE_PORT} --user=${CLICKHOUSE_USER} --password=${CLICKHOUSE_PASS} --database=${CLICKHOUSE_DB} --query="CREATE TABLE ${CLICKHOUSE_DB}.${K8S_LOGS_TABLE} (date Date MATERIALIZED toDate(timestamp), timestamp DateTime, nsec UInt32, string_fields Nested (names String, values String), number_fields Nested (names String, values Float64), boolean_fields Nested (names String, values Float64), null_fields Nested (names String)) ENGINE = MergeTree(date, (timestamp, nsec), 32768);"